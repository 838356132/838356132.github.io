#!metadata
{
    "title":"线性回归",
    "titleImage":"",
    "type":"原创",
    "date":"2018-05-26",
    "author":["Mikukonai"],
    "tags":[]
}

#!content

: <button id="gd" class="md-button">梯度下降</button> <button id="clear" class="md-button">重置</button>

<canvas id="cv" width="360" height="280"></canvas>

: 点击按钮，生成随机样本，并开始拟合。

#!css
canvas {
    display: block;
    border: none;
    box-shadow: 0 2px 5px 0 rgba(0,0,0,0.2);
    margin: 10px auto 10px auto;
}
#!js

#script:./js/regression.js

$(function() {
    const canvas = document.getElementById('cv');
    const WIDTH = 320;
    const HEIGHT = 320;
    canvas.height = HEIGHT;
    canvas.width = WIDTH;

    let xs = [0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30];
    let ys = new Array();

    let timer = 0;

    $('#mask').click(function() {
        $('#mask').fadeToggle(200);
    });

    $('#gd').click(function() {
        clearInterval(timer);
        for(let i = 0; i < xs.length; i++) {
            ys[i] = i + (Math.random() * 5) * ((Math.random() > 0.5) ? -1 : 1);
        }
        let reg = new Regression(xs, ys);
        plot(xs, ys, canvas);
        timer = GD(reg, false, canvas);
    });
    $('#sgd').click(function() {
        clearInterval(timer);
        for(let i = 0; i < xs.length; i++) {
            ys[i] = i + (Math.random() * 5) * ((Math.random() > 0.5) ? -1 : 1);
        }
        let reg = new Regression(xs, ys);
        plot(xs, ys, canvas);
        timer = GD(reg, true, canvas);
    });

    $('#clear').click(function() {
        clearInterval(timer);
        clear(canvas);
    });
});

